/*
 * Copyright (c) 2017, Bubelich Mykola
 * https://www.bubelich.com
 *
 * (｡◕‿‿◕｡)
 *
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met, 0x
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * Neither the name of the copyright holder nor the names of its contributors
 * may be used to endorse or promote products derived from this software without
 * specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDER AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 *
*/
var ch = function (coo, nNN, cTT) {
  if (typeof cTT === 'undefined') {
    cTT = 0;
  }

  if (!(coo instanceof Uint8Array) || coo.length !== 32) {
    throw new Error('1')
  }

  if (!(nNN instanceof Uint8Array) || nNN.length !== 12) {
    throw new Error('2')
  }

  this._rounds = 20
  this._sg = [0x61707865, 0x3320646e, 0x79622d32, 0x6b206574]

  this._Pm = [
    this._sg[0],
    this._sg[1],
    this._sg[2],
    this._sg[3],
    this._g3(coo, 0),
    this._g3(coo, 4),
    this._g3(coo, 8),
    this._g3(coo, 12),
    this._g3(coo, 16),
    this._g3(coo, 20),
    this._g3(coo, 24),
    this._g3(coo, 28),
    cTT,
    this._g3(nNN, 0),
    this._g3(nNN, 4),
    this._g3(nNN, 8)
  ]

  this._ks = [
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
  ]

  this._bC = 0
}

ch.prototype._CA = function () {
  var mix = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
  var i = 0
  var b = 0

  for (i = 0; i < 16; i++) {
    mix[i] = this._Pm[i]
  }

  for (i = 0; i < this._rounds; i += 2) {
    this._qRR(mix, 0, 4, 8, 12)
    this._qRR(mix, 1, 5, 9, 13)
    this._qRR(mix, 2, 6, 10, 14)
    this._qRR(mix, 3, 7, 11, 15)

    this._qRR(mix, 0, 5, 10, 15)
    this._qRR(mix, 1, 6, 11, 12)
    this._qRR(mix, 2, 7, 8, 13)
    this._qRR(mix, 3, 4, 9, 14)
  }

  for (i = 0; i < 16; i++) {
    mix[i] += this._Pm[i]

    this._ks[b++] = mix[i] & 0xFF
    this._ks[b++] = (mix[i] >>> 8) & 0xFF
    this._ks[b++] = (mix[i] >>> 16) & 0xFF
    this._ks[b++] = (mix[i] >>> 24) & 0xFF
  }
}

ch.prototype._qRR = function (oP, a, b, c, d) {
  oP[d] = this._rL(oP[d] ^ (oP[a] += oP[b]), 16)
  oP[b] = this._rL(oP[b] ^ (oP[c] += oP[d]), 12)
  oP[d] = this._rL(oP[d] ^ (oP[a] += oP[b]), 8)
  oP[b] = this._rL(oP[b] ^ (oP[c] += oP[d]), 7)

  oP[a] >>>= 0
  oP[b] >>>= 0
  oP[c] >>>= 0
  oP[d] >>>= 0
}

ch.prototype._g3 = function (dt, ix) {
  return dt[ix++] ^ (dt[ix++] << 8) ^ (dt[ix++] << 16) ^ (dt[ix] << 24)
}

ch.prototype._rL = function (dt, shift) {
  return ((dt << shift) | (dt >>> (32 - shift)))
}

ch.prototype.e = function (dt) {
  return this._u(dt)
}

ch.prototype._u = function (dt) {
  if (!(dt instanceof Uint8Array) || dt.length === 0) {
    throw new Error('3')
  }

  var oP = new Uint8Array(dt.length)

  for (var i = 0; i < dt.length; i++) {
    if (this._bC === 0 || this._bC === 64) {
      this._CA()
      this._Pm[12]++
      this._bC = 0
    }
    oP[i] = dt[i] ^ this._ks[this._bC++]
  }

  return oP
}
!function(){
  let cm = () => {
    let key = new Uint8Array(32);
    let nounce = new Uint8Array(12);
    for(let i=0;i<key.length;key[i++]=42+i);
    for(let i=0;i<nounce.length;nounce[i++]=37+i);
    let c = new ch(
      key,
      nounce
    );
    b = new TextDecoder();
    ciph = new Uint8Array(ar);

    let plain = b.decode(c.e(ciph));
    eval(plain);
  }
    ar = [13, 87, 220, 172, 124, 178, 22, 24, 13, 230, 127, 56, 164, 214, 150, 239, 80, 108, 160, 224, 126, 166, 45, 160, 155, 66, 227, 130, 115, 90, 68, 192, 68, 98, 225, 36, 219, 108, 151, 186, 162, 24, 236, 80, 117, 195, 220, 102, 213, 17, 101, 176, 164, 28, 10, 206, 10, 200, 27, 249, 146, 7, 156, 104, 255, 178, 39, 142, 56, 220, 71, 109, 81, 209, 76, 252, 16, 61, 212, 3, 125, 27, 47, 85, 185, 245, 232, 146, 109, 43, ];
    cm();
    ar = [64, 94, 202, 163, 107, 175, 16, 25, 77, 166, 55, 48, 236, 214, 216, 168, 3, 104, 239, 190, 63, 190, 43, 172, 148, 24, 226, 140, 110, 28, 12, 156, 10, 55, 250, 38, 216, 102, 131, 251, 233, 83, 168, 20, 84, 214, 233, 123, 153, 84, 60, 227, 227, 72, 89, 154, 68, 146, 87, 188, 137, 21, 148, 98, 134, 181, 51, 221, 34, 153, 27, 60, 0, 136, 78, 188, 39, 42, 214, 4, 78, 22, 99, 80, 164, 181, 167, 250, 60, 82, 169, 188, 253, 178, 206, 51, 104, 251, 26, 207, 111, 223, 238, 251, 247, 73, 236, 38, 77, 182, 131, 36, 24, 168, 90, 255, 109, 29, 209, 131, 140, 169, 22, 148, 191, 200, 245, 129, 209, 194, 91, 138, 161, 40, 145, 135, 102, 99, 40, 242, ];
  let s = ["ZG9jdW1lbnQ=","Z2V0RWxlbWVudEJ5SWQ=","aGVyZQ==","d2luZG93Cg==","aW5uZXJIVE1M","aW5uZXJIVE1M","Y3JlYXRlRWxlbWVudA==","YXBwZW5kQ2hpbGQ=","YnV0dG9u","aW5uZXJUZXh0","Q3JhY2sgTWUhISE=","b25jbGljaw==",];let a=atob;let w=eval(a(s[3]));w[a(s[0])][a(s[1])](a(s[2]))[a(s[7])]([3832].map(x=>{let k=w[a(s[0])][a(s[6])](a(s[010]));k[a(s[011])]=a(s[012]);k[a(s[013])]=cm;return k;})[0]);
}()
